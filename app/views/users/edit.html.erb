<h1>ユーザー情報の編集</h1>

<%= form_with(model: @user, local: true) do |f| %>
<% if @user.errors.any? %>
<div id="error_explanation">
    <h2><%= pluralize(@user.errors.count, "error") %> prohibited this user from being saved:</h2>
    <ul>
        <% @user.errors.full_messages.each do |message| %>
        <li><%= message %></li>
        <% end %>
    </ul>
</div>
<% end %>

<div>
    <%= f.label :name_order, "Name Order" %>
    <%= f.select :name_order, [["Western", "western"], ["Eastern", "eastern"]], {}, { id: "name_order_select" } %>
</div>

<div>
    <%= f.label :given_name, "Given Name" %>
    <%= f.text_field :given_name, value: @user.given_name || "" %>
</div>

<div>
    <%= f.label :family_name, "Family Name" %>
    <%= f.text_field :family_name, value: @user.family_name || "" %>
</div>

<div>
    <%= f.label :email %>
    <%= f.email_field :email, value: @user.email || "" %>
</div>

<h2>必要なプロフィール</h2>
<div>
    <%= f.fields_for :necessary_profile do |np| %>
    <div>
        <%= np.label :date_of_birth, "生年月日" %>
        <%= np.date_field :date_of_birth, value: @necessary_profile.date_of_birth || "" %>
    </div>
    <div>
        <%= np.label :residence, "住所" %>
        <%= np.text_field :residence, value: @necessary_profile.residence || "" %>
    </div>
    <div>
        <%= np.label :job, "職業" %>
        <%= np.text_field :job, value: @necessary_profile.job || "" %>
    </div>
    <% end %>
</div>

<h2>不要なプロフィール</h2>
<div>
    <%= f.fields_for :unnecessary_profile do |up| %>
    <div>
        <%= up.label :place_of_birth, "出生地" %>
        <%= up.text_field :place_of_birth, value: @unnecessary_profile.place_of_birth || "" %>
    </div>
    <div>
        <%= up.label :certificate, "証明書" %>
        <%= up.text_field :certificate, value: @unnecessary_profile.certificate || "" %>
    </div>
    <div>
        <%= up.label :bio, "自己紹介" %>
        <%= up.text_area :bio, value: @unnecessary_profile.bio || "" %>
    </div>
    <% end %>
</div>

<div class="actions">
    <%= f.submit "更新" %>
</div>
<% end %>

<%= link_to '戻る', user_path(@user) %>